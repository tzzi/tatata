<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="matchingboard">
	<!-- mypage에서 필요 정보 가져오기 (test용)-->
	<select id="mypagelist" resultType="java.util.HashMap">
	select * from addinfo where id = #{id}
	</select>
	
	<select id="matchinglist" resultType="java.util.HashMap">
	select * from addinfo where id != #{id}
	</select>
	
	<!-- 내가 고를 상대 확인 -->
	<select id="matchingcheck" resultType="java.util.HashMap">
	SELECT DISTINCT * FROM MATCHINGCHECK WHERE mynick= #{nick}
	</select>
	
	<!-- 나를 선택한 상대 확인 -->
	<select id="matchingforme" resultType="java.util.HashMap">
	SELECT DISTINCT * FROM MATCHINGCHECK WHERE MATCHINGNICK= #{nick}
	</select>
	
	<insert id="matchinginsert">
	insert into matchingcheck(matchingnick,fear,yellow_card,gender,mynick,email,overlap) values(#{matchingnick},#{fear},#{yellow_card},#{gender},#{mynick},#{email},#{overlap})
	</insert>
	
	<insert id="agree">
	insert into matchingagree(id,nick,gender,area,fear,matchtype,yellow_card,email,
	basket1,basket2,basket3,basket4,basket5,
	type1,type2,type3,type4,type5)
	values
	(#{ID},#{NICK},#{GENDER},#{AREA},#{FEAR},#{MATCHTYPE},#{YELLOW_CARD},#{EMAIL},
	#{BASKET1, jdbcType=VARCHAR},#{BASKET2, jdbcType=VARCHAR},#{BASKET3, jdbcType=VARCHAR},#{BASKET4, jdbcType=VARCHAR},#{BASKET5, jdbcType=VARCHAR}
	,#{TYPE1, jdbcType=VARCHAR},#{TYPE2, jdbcType=VARCHAR},#{TYPE3, jdbcType=VARCHAR},#{TYPE4, jdbcType=VARCHAR},#{TYPE5, jdbcType=VARCHAR}
	)	
	</insert>
	
	<select id="mybasketinfo" resultType="java.util.HashMap">
	select * from mybasketinfo where nick = #{nick}	
	</select>
	
	<!-- 매칭리스트에 있는 나의 정보 -->
	<select id="checkagree" resultType="java.util.HashMap">
	select * from matchingagree where nick = #{nick}
	</select>
	
	<!-- 매칭 리스트에 있는 나를 제외한 정보 -->
	<select id="notmylist" resultType="java.util.HashMap">
	select * from matchingagree where nick != #{nick}
	</select>
	
	<!-- 새로운 장바구니 업데이트 -->
	<update id="updatebasket">
	update matchingagree set 
	basket1=#{BASKET1,jdbcType=VARCHAR},
	basket2=#{BASKET2,jdbcType=VARCHAR},
	basket3=#{BASKET3,jdbcType=VARCHAR},
	basket4=#{BASKET4,jdbcType=VARCHAR},
	basket5=#{BASKET5,jdbcType=VARCHAR},
	type1=#{TYPE1,jdbcType=VARCHAR},
	type2=#{TYPE2,jdbcType=VARCHAR},
	type3=#{TYPE3,jdbcType=VARCHAR},
	type4=#{TYPE4,jdbcType=VARCHAR},
	type5=#{TYPE5,jdbcType=VARCHAR}
	where nick = #{NICK}
	</update>
	
	
</mapper>